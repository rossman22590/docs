{"openapi":"3.0.0","servers":[{"url":"/api"}],"security":[{"bearerAuth":[]}],"info":{"version":"0.0.1","title":"Pixio API","description":"Interact with Pixio programmatically to trigger run and retrieve output"},"components":{"securitySchemes":{"bearerAuth":{"type":"apiKey","bearerFormat":"JWT","in":"header","name":"Authorization","description":"API token created in Comfy Deploy <a href='/api-keys' target='_blank' style='text-decoration: underline;'>/api-keys</a>"}},"schemas":{},"parameters":{}},"paths":{"/run":{"post":{"tags":["workflows"],"summary":"Run a workflow via deployment_id","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"deployment_id":{"type":"string"},"inputs":{"type":"object","additionalProperties":{"anyOf":[{"type":"string"},{"type":"number"}]}}},"required":["deployment_id"]}}}},"responses":{"200":{"description":"Workflow queued","content":{"application/json":{"schema":{"type":"object","properties":{"run_id":{"type":"string"}},"required":["run_id"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error creating run","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}},"get":{"tags":["workflows"],"summary":"Get workflow run output","description":"Call this to get a run's output, usually in conjunction with polling method","parameters":[{"schema":{"type":"string"},"required":true,"name":"run_id","in":"query"}],"responses":{"200":{"description":"Retrieve the output","content":{"application/json":{"schema":{"type":"object","properties":{"id":{"type":"string","format":"uuid"},"workflow_version_id":{"type":"string","nullable":true,"format":"uuid"},"workflow_inputs":{"type":"object","example":{"input_text":"some external text input","input_image":"https://somestatic.png"}},"workflow_id":{"type":"string","format":"uuid"},"machine_id":{"type":"string","nullable":true,"format":"uuid"},"origin":{"type":"string","enum":["manual","api","public-share"]},"status":{"type":"string","enum":["not-started","running","uploading","success","failed"]},"ended_at":{"type":"string","nullable":true},"created_at":{"type":"string"},"started_at":{"type":"string","nullable":true}},"required":["id","workflow_version_id","workflow_inputs","workflow_id","machine_id","origin","status","ended_at","created_at","started_at"]}}}},"400":{"description":"Workflow not found","content":{"application/json":{"schema":{"type":"object","properties":{"code":{"type":"string","example":400},"message":{"type":"string","example":"Workflow not found"}},"required":["code","message"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error getting output","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/upload-url":{"get":{"tags":["files"],"summary":"Upload any files to the storage","description":"Usually when you run something, you want to upload a file, image etc.","parameters":[{"schema":{"type":"string","enum":["image/png","image/jpg","image/jpeg"]},"required":true,"name":"type","in":"query"},{"schema":{"type":"string"},"required":true,"name":"file_size","in":"query"}],"responses":{"200":{"description":"Retrieve the output","content":{"application/json":{"schema":{"type":"object","properties":{"upload_url":{"type":"string"},"file_id":{"type":"string"},"download_url":{"type":"string"}},"required":["upload_url","file_id","download_url"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error when generating upload url","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/auth-response/:request_id":{"get":{"tags":["comfyui"],"summary":"Get an API Key with code","description":"This endpoints is specifically built for ComfyUI workflow upload.","parameters":[{"schema":{"type":"string"},"required":true,"name":"request_id","in":"path"}],"responses":{"200":{"description":"The returned API Key","content":{"application/json":{"schema":{"type":"object","properties":{"api_key":{"type":"string"},"name":{"type":"string"}},"required":["api_key","name"]}}}},"201":{"description":"The API key is not yet ready","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string"}},"required":["message"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error when fetching the API Key with code","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/workflow":{"post":{"tags":["comfyui"],"summary":"Upload workflow from ComfyUI","description":"This endpoints is specifically built for ComfyUI workflow upload.","requestBody":{"content":{"application/json":{"schema":{"type":"object","properties":{"workflow_id":{"type":"string"},"workflow_name":{"type":"string","minLength":1},"workflow":{"nullable":true},"workflow_api":{"type":"object","additionalProperties":{"type":"object","properties":{"inputs":{"type":"object","additionalProperties":{"nullable":true}},"class_type":{"type":"string"}},"required":["inputs"]}},"snapshot":{"type":"object","properties":{"comfyui":{"type":"string"},"git_custom_nodes":{"type":"object","additionalProperties":{"type":"object","properties":{"hash":{"type":"string"},"disabled":{"type":"boolean"}},"required":["hash","disabled"]}},"file_custom_nodes":{"type":"array","items":{"nullable":true}}},"required":["comfyui","git_custom_nodes","file_custom_nodes"]}},"required":["workflow_api","snapshot"]}}}},"responses":{"200":{"description":"Retrieve the output","content":{"application/json":{"schema":{"type":"object","properties":{"workflow_id":{"type":"string"},"version":{"type":"string"}},"required":["workflow_id","version"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error when uploading the workflow","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}},"/workflow-version/:version_id":{"get":{"tags":["comfyui"],"summary":"Get comfyui workflow","description":"Use this to retrieve comfyui workflow by id","parameters":[{"schema":{"type":"string"},"required":true,"name":"version_id","in":"path"}],"responses":{"200":{"description":"Retrieve the output","content":{"application/json":{"schema":{"type":"object","properties":{"workflow_id":{"type":"string","format":"uuid"},"id":{"type":"string","format":"uuid"},"workflow":{"type":"object"},"workflow_api":{"type":"object"},"version":{"type":"number"},"snapshot":{"type":"object"},"created_at":{"type":"string"},"updated_at":{"type":"string"}},"required":["workflow_id","id","workflow","workflow_api","version","snapshot","created_at","updated_at"]}}}},"401":{"description":"Invalid or expired token","content":{"text/plain":{"schema":{"type":"string","example":"Invalid or expired token"}}}},"500":{"description":"Error when uploading the workflow","content":{"application/json":{"schema":{"type":"object","properties":{"error":{"type":"string"}},"required":["error"]}}}}}}}}}
